services:
  wdsx:
    build:
      context: .
      dockerfile: Dockerfile
    image: ghcr.io/emdzej/wdsx:latest
    container_name: wdsx
    restart: unless-stopped
    ports:
      - "8080:80"
    volumes:
      # Mount your WDS data directory
      # The data should be imported first using the importer tool:
      #   pnpm --filter @emdzej/wds-importer import --source /path/to/wds --output ./data
      - ./data:/data:ro
    environment:
      - TZ=Europe/Warsaw
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost/health"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 5s

# Example with external data volume:
#
# services:
#   wdsx:
#     image: ghcr.io/emdzej/wdsx:latest
#     ports:
#       - "8080:80"
#     volumes:
#       - wds-data:/data:ro
#
# volumes:
#   wds-data:
#     external: true
